<!-- templates/kanban/partials/card.html -->
<article id="card-{{ card.id }}" data-card-id="{{ card.id }}"
         data-move-url="{% url 'kanban:card_move' card.id %}"
         class="cursor-pointer rounded-lg border border-gray-200 bg-white p-3 shadow-sm hover:border-blue-300"
         hx-get="{% url 'kanban:card_detail' card.id %}"
         hx-target="#card-drawer-body" hx-swap="innerHTML"
         onclick="openCardDrawer()">

  <div class="flex items-start justify-between">
    <h4 class="text-sm font-medium text-gray-900">{{ card.titulo }}</h4>

    <button class="text-xs text-gray-400 hover:text-red-600"
            onclick="event.stopPropagation();"
            hx-post="{% url 'kanban:card_delete' card.id %}"
            hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}'
            hx-target="#card-{{ card.id }}" hx-swap="outerHTML">
      excluir
    </button>
  </div>

  {% if card.descricao %}
    <p class="mt-1 text-xs text-gray-500 line-clamp-2">{{ card.descricao }}</p>
  {% endif %}

  <!-- progresso de tarefas estilo Trello -->
  <div class="mt-2 flex items-center justify-between">
    <span class="inline-flex items-center gap-1 text-xs text-gray-500">
      <svg class="h-4 w-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
        <path d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 10-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z"/>
      </svg>
      {{ card.tarefas_concluidas }}/{{ card.tarefas_total }}
    </span>
  </div>
</article>


